(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dcbbf82"],{5710:function(e,t,n){"use strict";n("96cf");var i=n("3b8d"),o=n("6c47");t["a"]={mixins:[o["a"]],inject:["libraryContentEventBus"],watch:{libraryId:{handler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=5;break}if(e.t0=this.initComponent,!e.t0){e.next=5;break}return e.next=5,this.initComponent();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.initEventBus&&this.initEventBus(this.libraryContentEventBus);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{initEventBus:function(e){},initComponent:function(){}}}},"5d30":function(e,t,n){},a38e:function(e,t,n){"use strict";var i=n("5d30"),o=n.n(i);o.a},ca09:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-library-drawer-doc"},[n("el-drawer",{attrs:{title:e.title,visible:e.visibleDrawer,"custom-class":"content-drawer",size:"400px","modal-append-to-body":!1},on:{"update:visible":function(t){e.visibleDrawer=t}}},[n("div",{staticClass:"content-drawer__content"},[n("el-form",{attrs:{model:e.docInfo,"label-position":"top"}},[n("el-form-item",{attrs:{label:"文档标题"}},[n("el-input",{attrs:{placeholder:"请输入文档标题",autocomplete:"off",clearable:""},model:{value:e.docInfo.title,callback:function(t){e.$set(e.docInfo,"title",t)},expression:"docInfo.title"}})],1),n("el-form-item",[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                        文档分组\n                        "),n("el-button",{staticClass:"doc-group-operation",attrs:{type:"text",icon:"el-icon-refresh",loading:e.groupTreeLoading,size:"medium"},on:{click:e.onGroupTreeFlush}})],1),n("el-cascader",{staticClass:"doc-group-tree",attrs:{props:{value:"id",label:"name",checkStrictly:!0,multiple:!1,emitPath:!1},"popper-class":"c-library-drawer-doc__cascader",options:e.groupTree,placeholder:"搜索文档分组",filterable:"",clearable:""},model:{value:e.docInfo.groupId,callback:function(t){e.$set(e.docInfo,"groupId",t)},expression:"docInfo.groupId"}})],1)],1)],1),n("el-alert",{attrs:{title:"该操作同时会保存正在编辑的文档内容！",type:"info",closable:!1,"show-icon":""}}),n("div",{staticClass:"content-drawer__footer"},[n("el-popconfirm",{attrs:{icon:"el-icon-warning",title:"是否确认重置？"},on:{onConfirm:e.onReset}},[n("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("重 置")])],1),n("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.onDocSave}},[e._v("保 存")])],1)],1)],1)},o=[],r=(n("96cf"),n("3b8d")),a=n("cc2f"),s=n("5710"),c={name:"c-library-drawer-doc",mixins:[a["a"],s["a"]],computed:{title:function(){return this.isSaveAsMode?"另存为文档":"文档信息"}},data:function(){return{isSaveAsMode:!1,docInfo:{id:0,title:"",groupId:0,libraryId:0},docInfoBackup:{},groupTree:[],saveLoading:!1,groupTreeLoading:!1}},methods:{initEventBus:function(e){var t=this;e.$on("editor-doc-info",(function(e){var n=e.docInfo,i=e.isSaveAsMode,o=void 0!==i&&i;t.isSaveAsMode=o,t.docInfo=o?t.$utils.CloneDeep(n):n,t.docInfoBackup=t.$utils.CloneDeep(n),t.visibleDrawer=!0,t.initDocGroupTree()}))},initDocGroupTree:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,i=this,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],0===this.groupTree.length||t){e.next=3;break}return e.abrupt("return",this.groupTree);case 3:return n={library_id:this.docInfo.libraryId},e.next=6,this.$api.v1.LibraryDocGroupTree(n,{loading:function(e){i.groupTreeLoading=e}}).then((function(e){var t=e.resData;i.groupTree=t}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onDocSave:function(){var e=this;if(this.isSaveAsMode)return this.onDocSaveAs(),!0;this.saveLoading=!0,this.libraryContentEventBus.$emit("doc-save",{docId:this.docInfo.id,done:function(){e.saveLoading=!1}})},onDocSaveAs:function(){var e=this;this.saveLoading=!0;var t=this.$utils.CloneDeep(this.docInfo);this.libraryContentEventBus.$emit("doc-save-as",{docInfo:t,done:function(t){var n=t.resData;e.saveLoading=!1,n.id>0&&(e.$tip.success("另存为成功"),e.visibleDrawer=!1)}})},onGroupTreeFlush:function(){this.initDocGroupTree(!0)},onReset:function(){var e=this.$utils.CloneDeep(this.docInfoBackup);this.docInfo.groupId=e.groupId,this.docInfo.title=e.title}}},l=c,u=(n("a38e"),n("2877")),d=Object(u["a"])(l,i,o,!1,null,null,null);t["default"]=d.exports},cc2f:function(e,t,n){"use strict";t["a"]={props:{visible:{type:Boolean,default:!1}},watch:{visible:function(e){this.visibleDrawer=e},visibleDrawer:function(e){this.$emit("update:visible",e),e?this.onDrawerOpen&&this.onDrawerOpen():this.$emit("close",this.$data)}},data:function(){return{visibleDrawer:this.visible,loadingDrawer:!1}}}}}]);
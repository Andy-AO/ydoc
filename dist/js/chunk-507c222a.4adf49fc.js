(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-507c222a"],{"2f21":function(e,t,r){"use strict";var n=r("79e5");e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"476c":function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d"),r("96cf");var n=r("3b8d"),i=r("bd86"),o=r("2f62");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t["a"]={computed:a(a({},Object(o["c"])("libraryPreview",["libraryShareInfo","isAccessed","isShareSimplify"])),Object(o["b"])("libraryPreview",["libraryId","shareAccessToken"])),inject:["libraryPreviewEventBus"],watch:{isAccessed:{handler:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}if(e.t0=this.initComponent,!e.t0){e.next=5;break}return e.next=5,this.initComponent();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0}},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.initEventBus&&this.initEventBus(this.libraryPreviewEventBus);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},"55dd":function(e,t,r){"use strict";var n=r("5ca1"),i=r("d8e8"),o=r("4bf8"),c=r("79e5"),a=[].sort,s=[1,2,3];n(n.P+n.F*(c((function(){s.sort(void 0)}))||!c((function(){s.sort(null)}))||!r("2f21")(a)),"Array",{sort:function(e){return void 0===e?a.call(o(this)):a.call(o(this),i(e))}})},5956:function(e,t,r){"use strict";var n=r("ffd9d"),i=r.n(n);i.a},a0bc:function(e,t,r){},c235:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"c-library-preview-tree"},[r("el-input",{staticClass:"directory-tree-search",attrs:{size:"small",placeholder:"输入关键字，检索目录与文档",clearable:""},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),r("el-scrollbar",{staticClass:"tree"},[r("el-tree",{attrs:{"element-loading-spinner":"el-icon-loading",data:e.dataTree,props:{children:"children",label:"name"},"node-key":"key","empty-text":e.treeEmptyText,"default-expand-all":""},on:{"node-click":e.onNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return r("div",{staticClass:"directory-tree-item"},["group"===i.nodeType?r("i",{staticClass:"tree-node-group-icon icon y-icon-folder-close"}):r("i",{staticClass:"tree-node-doc-icon el-icon-document"}),r("el-tooltip",{attrs:{content:i.name,"open-delay":800,effect:"dark",placement:"top-end"}},[r("span",{staticClass:"tree-node-label",attrs:{level:n.level}},[e._v(e._s(i.name))])])],1)}}])})],1)],1)},i=[],o=(r("8e6e"),r("456d"),r("55dd"),r("bd86")),c=(r("a481"),r("96cf"),r("3b8d")),a=(r("ac6a"),r("476c"));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={name:"c-library-preview-tree",mixins:[a["a"]],computed:{showDocGroupTree:function(){return!this.treeLoading},dataTree:function(){var e=this,t={},r=this.$utils.CloneDeep(this.docDocGroupTree),n=this.$utils.CloneDeep(this.docCollection);return n.filter((function(t){return t.title.indexOf(e.searchKey)>=0})).forEach((function(e){e.nodeType="doc",e.name=e.title,e.key="doc-"+e.id,t[e.group_id]||(t[e.group_id]=[]),t[e.group_id].push(e)})),t[0]&&(r=r.concat(t[0])),this.deepBuildDataTree(r,t)},treeEmptyText:function(){return this.treeLoading?"":"暂无数据"}},data:function(){return{searchKey:"",docDocGroupTree:[],docCollection:[],treeLoading:!0}},methods:{initComponent:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isShareSimplify){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.initDocGroupTree();case 4:return e.next=6,this.initDocCollection();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initEventBus:function(e){var t=this;e.$on("doc-tree-flush",(function(){t.initComponent()}))},initDocGroupTree:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.shareAccessToken,e.next=3,this.$api.v1.LibraryShareDocGroupTree(t,{loading:function(e){r.treeLoading=e}}).then((function(e){var t=e.resData;r.docDocGroupTree=t}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initDocCollection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.shareAccessToken,e.next=3,this.$api.v1.LibraryShareDocCollection(t,{loading:function(e){r.treeLoading=e}}).then((function(e){var t=e.resData;r.docCollection=t}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onNodeClick:function(e){var t="#".concat(e.nodeType,"-").concat(e.id);t!==this.$route.hash&&this.$router.replace(u(u({},this.$route),{},{hash:t})),"doc"===e.nodeType&&this.libraryPreviewEventBus.$emit("doc-view",e.id)},deepBuildDataTree:function(e,t){var r=this;return e&&0!==e.length?(e=this.$utils.CloneDeep(e),e.forEach((function(e){e.nodeType=e.nodeType?e.nodeType:"group",e.key="group-"+e.id,e.children=r.deepBuildDataTree(e.children,t)||[],t[e.id]&&(e.children=e.children.concat(t[e.id])),e.children&&e.children.sort((function(e,t){return e.sort-t.sort}))})),e.sort((function(e,t){return e.sort-t.sort})),e):[]}}},d=l,p=(r("5956"),r("c6c6"),r("2877")),f=Object(p["a"])(d,n,i,!1,null,"2354efa7",null);t["default"]=f.exports},c6c6:function(e,t,r){"use strict";var n=r("a0bc"),i=r.n(n);i.a},ffd9d:function(e,t,r){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bc6b756"],{"0fb9":function(e,t,r){},"1e17":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"c-library-preview-protected"},[r("el-card",{staticClass:"share-info"},[r("div",{staticClass:"share-info__header",attrs:{slot:"header"},slot:"header"},[r("el-tooltip",{attrs:{effect:"dark",content:e.libraryShareInfo.share_name,placement:"top-start"}},[r("span",{staticClass:"share-name text-overflow"},[e._v(e._s(e.libraryShareInfo.share_name))])]),r("el-tooltip",{attrs:{effect:"dark",content:"分享时间",placement:"top-end"}},[r("span",{staticClass:"share-date"},[r("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(e._f("dateFormat")(e.libraryShareInfo.create_time,"Y-m-d H:i"))+"\n                ")])])],1),r("div",{staticClass:"share-info__content"},[e._v("\n            "+e._s(e.libraryShareInfo.share_desc||"这个人很懒，什么都没留下～")+"\n        ")]),r("div",{staticClass:"share-info__footer"},[r("el-tooltip",{attrs:{effect:"dark",content:"分享人",placement:"top-start"}},[r("span",{staticClass:"share-user"},[r("el-avatar",{attrs:{size:20,fit:"fill",src:e.libraryShareInfo.user_info.avatar_url}},[e._v("\n                        ^ v ^\n                    ")]),r("span",{staticClass:"text-overflow"},[e._v(e._s(e.libraryShareInfo.user_info.nickname))])],1)]),r("el-tooltip",{attrs:{effect:"dark",content:"分享有效期",placement:"top-start"}},[r("span",{staticClass:"share-expire"},[e._v("有效期："+e._s(e.expireInfo))])])],1)]),r("el-card",{staticStyle:{"margin-top":"15px"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入访问密码",type:"password",size:"mini","show-password":"",clearable:""},model:{value:e.accessPassword,callback:function(t){e.accessPassword=t},expression:"accessPassword"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-circle-check",loading:e.confirmLoading},on:{click:e.onConfirm},slot:"append"},[e._v("访问")])],1)],1)],1)},s=[],n=r("476c"),i=r("787f"),c={name:"c-library-preview-protected",mixins:[n["a"]],computed:{expireInfo:function(){return this.libraryShareInfo.expire_time>>0===0?"永久":this.$utils.DateFormat(this.libraryShareInfo.expire_time)+" 前"}},data:function(){return{accessPassword:"",confirmLoading:!1}},methods:{onConfirm:function(){var e=this,t={share_code:this.libraryShareInfo.share_code,share_access_password:this.accessPassword};this.$api.v1.LibraryShareInfo(t,{loading:function(t){e.confirmLoading=t}}).then((function(r){var a=r.resData;e.storeAccessPassword(t.share_code,t.share_access_password),e.$store.commit("libraryPreview/setLibraryShareInfo",{libraryShareInfo:a,isAccessed:!0,accessPassword:e.accessPassword})}))},storeAccessPassword:function(e,t){i["a"].setItem(i["b"].SHARE_ACCESS_PASSWORD,(function(r){return r=r||{},r[e]=t,r}),604800)}}},o=c,l=(r("6195"),r("2877")),f=Object(l["a"])(o,a,s,!1,null,"30f0bbc7",null);t["default"]=f.exports},"476c":function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d"),r("96cf");var a=r("3b8d"),s=r("bd86"),n=r("2f62");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t["a"]={computed:c(c({},Object(n["c"])("libraryPreview",["libraryShareInfo","isAccessed","isShareSimplify"])),Object(n["b"])("libraryPreview",["libraryId","shareAccessToken"])),inject:["libraryPreviewEventBus"],watch:{isAccessed:{handler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}if(e.t0=this.initComponent,!e.t0){e.next=5;break}return e.next=5,this.initComponent();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.initEventBus&&this.initEventBus(this.libraryPreviewEventBus);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},6195:function(e,t,r){"use strict";var a=r("0fb9"),s=r.n(a);s.a}}]);